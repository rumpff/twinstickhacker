<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_playerHead1</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-10</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>spr_player_hitbox</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Variable Initalization

m_Health = 100;

m_playerHead = global.playerHead;
m_playerWeapon = global.playerWeapon

m_gpId = 0;

m_moveSpeed = 0;
m_moveDirection = 0;

m_aimDirection = 0;

angle_prev = 0;
angle_next = 0;
angle_diff = 0;

m_shootCooldown = 0;

m_hStickL = 0;
m_vStickL = 0;

m_hStickLMovement = 0;
m_vStickLMovement = 0;

m_hStickR = 0;
m_vStickR = 0;

m_triggerRight = 0;
m_triggerLeft = 0;

m_shoulderRight = 0;
m_shoulderLeft = 0;

m_buttonA = 0;
m_buttonB = 0;
m_buttonX = 0;
m_buttonY = 0;

m_buttonAPressed = 0;
m_buttonBPressed = 0;
m_buttonXPressed = 0;
m_buttonYPressed = 0;

m_maxSpeed = 12;

m_headSprite = noone;
m_weaponSprite = noone;
m_shootSprite = noone;

m_oldPosX = 0;
m_oldPosY = 0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Get the sprites
switch (m_playerHead)
{
    case head_1:
        m_headSprite = spr_playerHead1;
        break;
    case head_2:
        m_headSprite = spr_playerHead2;
        break;
    case head_3:
        m_headSprite = spr_playerHead3;
        break;
    case head_4:
        m_headSprite = spr_playerHead4;
        break;
    case head_5:
        m_headSprite = spr_playerHead5;
        break;
    case head_6:
        m_headSprite = spr_playerHead6;
        break;
    case head_7:
        m_headSprite = spr_playerHead7;
        break;
    case head_8:
        m_headSprite = spr_playerHead8;
        break;
    case head_9:
        m_headSprite = spr_playerHead9;
        break;
    case head_10:
        m_headSprite = spr_playerHead10;
        break;
}

switch (m_playerWeapon)
{
    case weapon_1: 
        m_weaponSprite = spr_playerGun1Base;
        m_shootSprite = spr_playerGun1Shoot;
        break;
        
    case weapon_2: 
        m_weaponSprite = spr_playerGun2Base;
        m_shootSprite = spr_playerGun2Shoot;
        break;
        
    case weapon_3: 
        m_weaponSprite = spr_playerGun3Base;
        m_shootSprite = spr_playerGun3Shoot;
        break;
        
    case weapon_4: 
        m_weaponSprite = spr_playerGun4Base;
        m_shootSprite = spr_playerGun4Shoot;
        break;
        
    case weapon_5: 
        m_weaponSprite = spr_playerGun5Base;
        m_shootSprite = spr_playerGun5Shoot;
        break;
        
    case weapon_6: 
        m_weaponSprite = spr_playerGun6Base;
        m_shootSprite = spr_playerGun6Shoot;
        break;
        
    case weapon_7: 
        m_weaponSprite = spr_playerGun7Base;
        m_shootSprite = spr_playerGun7Shoot;
        break;
        
    case weapon_8: 
        m_weaponSprite = spr_playerGun8Base;
        m_shootSprite = spr_playerGun8Shoot;
        break;
        
    case weapon_9: 
        m_weaponSprite = spr_playerGun9Base;
        m_shootSprite = spr_playerGun9Shoot;
        break;
        
    case weapon_10: 
        m_weaponSprite = spr_playerGun10Base;
        m_shootSprite = spr_playerGun10Shoot;
        break;
}
 
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Gamepad Setup
gamepad_set_axis_deadzone(m_gpId, 0.3);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Set old pos
m_oldPosX = x;
m_oldPosY = y;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Obtain input

// Left stick
m_hStickL = gamepad_axis_value(m_gpId, gp_axislh);
m_vStickL = gamepad_axis_value(m_gpId, gp_axislv);

// Right stick
m_hStickR = gamepad_axis_value(m_gpId, gp_axisrh);
m_vStickR = gamepad_axis_value(m_gpId, gp_axisrv);

// Triggers
m_triggerRight = gamepad_button_value(m_gpId, gp_shoulderrb)
m_triggerLeft = gamepad_button_value(m_gpId, gp_shoulderlb)

// Shoulders
m_shoulderRight = gamepad_button_check(m_gpId, gp_shoulderr);
m_shoulderLeft = gamepad_button_check(m_gpId, gp_shoulderl);

// Butttons
m_buttonA = gamepad_button_check(m_gpId, gp_face1);
m_buttonB = gamepad_button_check(m_gpId, gp_face2);
m_buttonX = gamepad_button_check(m_gpId, gp_face3);
m_buttonY = gamepad_button_check(m_gpId, gp_face4);

m_buttonAPressed = gamepad_button_check_pressed(m_gpId, gp_face1);
m_buttonBPressed = gamepad_button_check_pressed(m_gpId, gp_face2);
m_buttonXPressed = gamepad_button_check_pressed(m_gpId, gp_face3);
m_buttonYPressed = gamepad_button_check_pressed(m_gpId, gp_face4);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Calculate directions and movement lerp

// Directions
if (m_hStickR != 0 || m_vStickR != 0)
{
    m_moveSpeed = point_distance(x, y, x + m_hStickL * m_maxSpeed, y + m_vStickL * m_maxSpeed);
    m_moveDirection = point_direction(x, y, x + m_hStickL, y + m_vStickL);
}

 
// Calcutate angle
if (m_hStickR != 0 || m_vStickR != 0) 
{ angle_next = point_direction(x, y, x + m_hStickR, y + m_vStickR); } // The angle with "made" with the stick
angle_prev = m_aimDirection; // the last angle of the image
angle_diff = angle_difference(angle_prev,angle_next); // get the difference between the angle

angle_next = angle_prev-angle_diff; // convert the angle to a number outside of 0-360 if needed

m_aimDirection = lerp(m_aimDirection, angle_next, 0.4);

// Movement lerp
m_hStickLMovement = lerp(m_hStickLMovement, m_hStickL, 0.2);
m_vStickLMovement = lerp(m_vStickLMovement, m_vStickL, 0.2);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Calculate next position and move

scr_move((m_hStickLMovement * m_maxSpeed), (m_vStickLMovement * m_maxSpeed))

/*
if (place_meeting(x + (m_hStickLMovement * m_maxSpeed), y + (m_vStickLMovement * m_maxSpeed), obj_collider))
{
    var horizontalSpeed = m_hStickL * m_maxSpeed;
    for (i = 0; i &lt; abs(horizontalSpeed); i++)
    {
        if (!place_meeting(x + sign(horizontalSpeed), y, obj_collider))
        {
            x += sign(horizontalSpeed);
        } else break;
    };
    
    var verticalSpeed = m_vStickL * m_maxSpeed;
    for (i = 0; i &lt; abs(verticalSpeed); i++)
    {
        if (!place_meeting(x, y + sign(verticalSpeed), obj_collider))
        {
            y += sign(verticalSpeed);
        } else break;
    };  
}
else
{
    x += m_hStickLMovement * m_maxSpeed// * m_moveMultiplier;
    y += m_vStickLMovement * m_maxSpeed// * m_moveMultiplier;
}
*/
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Shoot

if (m_triggerRight &gt; 0.4 &amp;&amp; m_shootCooldown == 0)
{
    sprite_index = m_shootSprite;
    image_index = 0; 
    switch(m_playerWeapon)
    {
        case weapon_1:       
            var bulletAngle = m_aimDirection + random_range(-5, 5);        
            bullet = instance_create(x, y, obj_bulletNormal);
            bullet.m_Angle = bulletAngle
            bullet.image_angle = bulletAngle        
            m_shootCooldown = 6;
            break;
        case weapon_2:
            var bulletAngle = m_aimDirection;
            
            for (i=0; i&lt;4; i++)
            {
                bullet = instance_create(x, y, obj_bulletNormal);
                bullet.m_Angle = bulletAngle + (i * 20) - 30;
                bullet.image_angle = bulletAngle     
            };
                         
            m_shootCooldown = 15;
            break;
        default:
            m_shootCooldown = 5;
        
    }
}

if (m_shootCooldown &gt; 0) { m_shootCooldown--; }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Return to base sprite if shoot animation has ended
sprite_index = m_weaponSprite;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_color(c_red);
draw_line_width(m_oldPosX - 1, m_oldPosY - 1, (m_oldPosX - 1) + lengthdir_x(500, m_aimDirection), (m_oldPosY - 1) + lengthdir_y(500, m_aimDirection), 2)

draw_sprite_ext(sprite_index, image_index, x, y, image_xscale, image_yscale, m_aimDirection, image_blend, image_alpha);
draw_sprite_ext(m_headSprite, image_index, m_oldPosX, m_oldPosY, image_xscale, image_yscale, m_aimDirection, image_blend, image_alpha);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
